(self.webpackChunkedumim=self.webpackChunkedumim||[]).push([[777],{47773:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n(74165),a=n(1413),s=n(15861),i=n(29439),c=n(72791),o=n(64082),l=n(65040),u=n(27849),d=n(47751),f=n(81159),p=n(76321),x=n(30276),h=n(94294),v=(n(49417),n(60807),n(80184));function m(){var e=(0,c.useState)(null),t=(0,i.Z)(e,2),n=t[0],m=t[1],j=(0,c.useState)(null),Z=(0,i.Z)(j,2),g=Z[0],b=Z[1],y=(0,c.useState)(""),k=(0,i.Z)(y,2),w=k[0],D=k[1],S=(0,c.useState)([]),L=(0,i.Z)(S,2),C=L[0],A=L[1],N=(0,c.useState)([]),E=(0,i.Z)(N,2),I=E[0],T=E[1],J=(0,c.useState)("All"),B=(0,i.Z)(J,2),F=B[0],O=B[1],W=(0,c.useState)("NEW"),P=(0,i.Z)(W,2),Q=P[0],V=P[1],z=(0,c.useState)([]),H=(0,i.Z)(z,2),K=H[0],R=H[1],U=(0,c.useState)(null),X=(0,i.Z)(U,2),G=X[0],M=(X[1],(0,c.useState)(null)),q=(0,i.Z)(M,2),Y=(q[0],q[1]),$=(0,c.useState)(""),_=(0,i.Z)($,2),ee=(_[0],_[1],(0,c.useState)(null)),te=(0,i.Z)(ee,2),ne=te[0],re=(te[1],(0,c.useState)(null)),ae=(0,i.Z)(re,2),se=ae[0],ie=(ae[1],(0,c.useState)([])),ce=(0,i.Z)(ie,2),oe=(ce[0],ce[1]);(0,c.useEffect)((function(){var e;"All"===F&&(e="All"),"Today"===F&&(e=864e5),"last2Days"===F&&(e=1728e5),"last7Days"===F&&(e=6048e5),"last30Days"===F&&(e=2592e6),"last60Days"===F&&(e=5184e6),console.log("filterby status");var t,n,r=new Date;t="ALL"===Q?I:I.filter((function(e){return Q===e.status?(console.log("NEW"),!0):Q===e.status?(console.log("Closed"),!0):void 0})),n="All"===e?t:t.filter((function(t){var n=t.timestamp,a=1e3*n.seconds+n.nanoseconds/1e6;return r-a<=e})),R(n)}),[I,F,Q]),(0,c.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,p.hJ)(f.db,"formData"),n=(0,p.cf)(t,(function(e){var t=e.docs.map((function(e){return(0,a.Z)({id:e.id},e.data())}));T(t)})),e.abrupt("return",(function(){return n()}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var le=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,ue(n);case 4:return a=e.sent,e.next=7,ue(g);case 7:return s=e.sent,e.next=10,de(a,s);case 10:m(null),b(null),D(""),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.error("Error adding item to Firestore: ",e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,x.iH)(f.tO,"images/".concat(t.name)),e.next=3,(0,x.KV)(n,t);case 3:return e.next=5,(0,x.Jt)(n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,p.hJ)(f.db,"items"),e.next=3,(0,p.ET)(a,{beforeimage:t,afterimage:n,title:w});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t,n,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=(0,p.hJ)(f.db,"items"),e.next=4,(0,p.PL)(t);case 4:n=e.sent,s=n.docs.map((function(e){return(0,a.Z)({id:e.id},e.data())})),A(s),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching data from Firestore: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,c.useEffect)((function(){fe()}),[]);var fe=function(){var e=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t,n,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=(0,p.hJ)(f.db,"Offers"),e.next=4,(0,p.PL)(t);case 4:n=e.sent,s=n.docs.map((function(e){return(0,a.Z)({id:e.id},e.data())})),console.log("items data",s),oe(s),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching data from Firestore: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e()},pe=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,p.JU)(f.db,"formData",t),e.next=3,(0,p.r7)(n,{status:"CLOSED"});case 3:R((function(e){return e.filter((function(e){return e.id!==t}))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=(0,p.JU)(f.db,"items",t),e.next=4,(0,p.oe)(n);case 4:A((function(e){return e.filter((function(e){return e.id!==t}))})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error deleting item from Firestore: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),he=function(e){V(e),O("All")},ve=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue(ne);case 2:t=e.sent,Y(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){"video"===G?function(e){var t=e.match(/[?&]v=([^&]+)/),n=t&&t[1];n&&Y(n)}(se):ve()}),[se,ne]),(0,v.jsxs)(o.Z,{"aria-label":"Basic tabs",defaultValue:0,children:[(0,v.jsxs)(l.Z,{children:[(0,v.jsx)(u.Z,{children:"Bookings"}),(0,v.jsx)(u.Z,{children:"Results"}),(0,v.jsx)(u.Z,{children:"Logout"})]}),(0,v.jsxs)(d.Z,{value:0,children:[(0,v.jsxs)(o.Z,{"aria-label":"Basic tabs",defaultValue:0,children:[(0,v.jsxs)(l.Z,{children:[(0,v.jsx)("div",{onClick:function(e){he("NEW")},children:(0,v.jsx)(u.Z,{children:"New"})}),(0,v.jsx)("div",{onClick:function(e){he("CLOSED")},children:(0,v.jsx)(u.Z,{children:"Closed Appointment"})}),(0,v.jsx)("div",{onClick:function(e){he("ALL")},children:(0,v.jsx)(u.Z,{children:"All"})})]}),(0,v.jsx)(d.Z,{value:0}),(0,v.jsx)(d.Z,{value:1,children:(0,v.jsx)("label",{children:(0,v.jsxs)("select",{value:F,onChange:function(e){return O(e.target.value)},children:[(0,v.jsx)("option",{value:"All",children:"All"}),(0,v.jsx)("option",{value:"Today",children:"Today"}),(0,v.jsx)("option",{value:"last2Days",children:"Last 2 days"}),(0,v.jsx)("option",{value:"last7Days",children:"Last 7 days"}),(0,v.jsx)("option",{value:"last30Days",children:"Last 30 days"}),(0,v.jsx)("option",{value:"last60Days",children:"Last 60 days"})]})})}),(0,v.jsx)(d.Z,{value:2,children:(0,v.jsx)("label",{children:(0,v.jsxs)("select",{value:F,onChange:function(e){return O(e.target.value)},children:[(0,v.jsx)("option",{value:"All",children:"All"}),(0,v.jsx)("option",{value:"Today",children:"Today"}),(0,v.jsx)("option",{value:"last2Days",children:"Last 2 days"}),(0,v.jsx)("option",{value:"last7Days",children:"Last 7 days"}),(0,v.jsx)("option",{value:"last30Days",children:"Last 30 days"}),(0,v.jsx)("option",{value:"last60Days",children:"Last 60 days"})]})})})]}),(0,v.jsx)("div",{className:"bookcard-grid",children:K.length>0?K.map((function(e){return(0,v.jsxs)("div",{className:"book-card",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("strong",{children:"Name:"})," ",e.name]}),(0,v.jsxs)("div",{children:[" ",(0,v.jsx)("strong",{children:"Phone Number:"})," ",e.phoneNumber," "]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("strong",{children:"Time Slot:"})," ",e.timeSlot]}),(0,v.jsxs)("div",{children:[" ",(0,v.jsx)("strong",{children:"Submission time:"})," ",e.timestamp&&e.timestamp.toDate().toString()]}),"NEW"===e.status&&(0,v.jsx)("div",{children:(0,v.jsx)("button",{style:{backgroundColor:"orange",padding:"5px 5px 7px 5px ",color:"white",marginTop:"10px",borderRadius:"7px"},onClick:function(){return pe(e.id)},children:"Close Appointment"})})]},e.id)})):(0,v.jsx)("div",{className:"text-center",style:{marginTop:"20px"},children:"Data Not Available "})})]}),(0,v.jsxs)(d.Z,{value:1,children:[(0,v.jsxs)("form",{onSubmit:le,children:[(0,v.jsxs)("label",{children:["Before Image:",(0,v.jsx)("input",{type:"file",onChange:function(e){e.target.files[0]&&m(e.target.files[0])}})]}),(0,v.jsx)("br",{}),(0,v.jsxs)("label",{children:["After Image:",(0,v.jsx)("input",{type:"file",onChange:function(e){e.target.files[0]&&b(e.target.files[0])}})]}),(0,v.jsx)("br",{}),(0,v.jsxs)("label",{children:["Title:",(0,v.jsx)("input",{type:"text",value:w,onChange:function(e){return D(e.target.value)}})]}),(0,v.jsx)("br",{}),(0,v.jsx)(h.Z,{type:"submit",color:"success",style:{margin:"20px"},children:"Add Item"})]}),(0,v.jsx)("div",{className:"bookcard-grid",children:C.map((function(e){return(0,v.jsxs)("div",{className:"book-card",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("img",{src:e.beforeimage,alt:e.title}),(0,v.jsx)("img",{src:e.afterimage,alt:e.title})]}),(0,v.jsx)("p",{children:e.title}),(0,v.jsx)(h.Z,{variant:"contained",color:"error",style:{margin:"20px"},onClick:function(){return xe(e.id)},children:"Delete"})]},e.id)}))})]}),(0,v.jsx)(d.Z,{value:2,children:(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{children:"Finish My Session Now "}),(0,v.jsx)("div",{children:(0,v.jsx)(h.Z,{variant:"contained",color:"error",onClick:function(){localStorage.removeItem("token"),window.location.reload()},children:"Logout"})})]})})]})}},81159:function(e,t,n){"use strict";n.d(t,{db:function(){return c},tO:function(){return o}});var r=n(44702),a=n(76321),s=n(30276),i=(0,r.ZF)({apiKey:"AIzaSyDrNDJBgI6BTQlnt9xxZzIWXLvIOXeDBnc",authDomain:"reflect-6315a.firebaseapp.com",projectId:"reflect-6315a",storageBucket:"reflect-6315a.appspot.com",messagingSenderId:"170172540537",appId:"1:170172540537:web:686cacb1746b42607696a8",measurementId:"G-3LQQN81LJN"}),c=(0,a.ad)(i),o=(0,s.cF)(i);(0,s.iH)(o,"images")},24654:function(){}}]);
//# sourceMappingURL=777.f1d4a8c9.chunk.js.map